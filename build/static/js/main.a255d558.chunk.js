(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){e.exports=a(46)},25:function(e,t,a){},26:function(e,t,a){e.exports=a.p+"static/media/logo.ee7cd8ed.svg"},27:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(8),r=a.n(i),s=(a(25),a(26),a(27),a(2)),c=a(3),o=a(5),u=a(4),m=a(6),d=a(9),h=a.n(d),f=a(18),p=a.n(f),g={margin:"auto"},v={maxWidth:"360px",margin:"auto",border:"2px solid",display:"flex",justifyContent:"center"},E={maxWidth:"360px",margin:"auto",border:"2px solid",display:"flex",justifyContent:"center"},w=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={file:"",imagePreviewUrl:"",imageResultUrl:"",detectResult:"",loading:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"resetState",value:function(){this.setState({file:"",imagePreviewUrl:"",imageResultUrl:"",detectResult:"",loading:!1})}},{key:"_handleSubmit",value:function(e){var t=this;if(e.preventDefault(),console.log("handle uploading-",this.state.file),null!=this.state.file&&""!=this.state.file){var a=new FormData;a.append("img",this.state.file);this.setState({loading:!0}),p.a.post("http://localhost:5000/api/image/upload",a,{headers:{"content-type":"multipart/form-data"}}).then(function(e){alert("The file is successfully uploaded"),t.setState({imageResultUrl:e.data.imageUrl,detectResult:e.data.result,loading:!1})}).catch(function(e){var a=e;null!=e.response&&null!=e.response.data&&(a+="\n"+e.response.data.msg),alert(a),console.log("[ERROR] ",a),t.resetState()})}else alert("Please Select Picture")}},{key:"_handleImageChange",value:function(e){var t=this;e.preventDefault();var a=new FileReader,n=e.target.files[0];if(""==n||null==n||n==this.state.file)return console.log("canceled",n),void this.resetState();a.onloadend=function(){t.setState({file:n,imagePreviewUrl:a.result})},a.readAsDataURL(n)}},{key:"render",value:function(){var e=this,t=this.state,a=t.imagePreviewUrl,n=t.imageResultUrl,i=t.loading,r=null,s=null,c=null;return r=a?l.a.createElement(h.a,{src:a,height:240,width:360}):l.a.createElement("div",{className:"previewText"},"Please select an Image for Preview"),s=n?l.a.createElement(h.a,{src:n,height:240,width:360}):l.a.createElement("div",{className:"previewText"},"Please select an Image for Preview"),c=1==this.state.loading?l.a.createElement("div",{className:"loader center"},l.a.createElement("i",{className:"fa fa-spinner fa-pulse fa-3x fa-fw"}),l.a.createElement("h4",null,"Please Wait...")):l.a.createElement("div",null),l.a.createElement("div",{className:"previewComponent"},l.a.createElement("form",{onSubmit:function(t){return e._handleSubmit(t)}},l.a.createElement("input",{className:"fileInput",type:"file",accept:"image/*",onChange:function(t){return e._handleImageChange(t)}}),l.a.createElement("button",{className:"submitButton",type:"submit",onClick:function(t){return e._handleSubmit(t)},disabled:i},i&&l.a.createElement("span",null,"Please Wait"),!i&&l.a.createElement("span",null,"Process Image"))),l.a.createElement("div",null,c),l.a.createElement("div",{style:g},l.a.createElement("h3",null,"Preview"),l.a.createElement("div",{className:"imgPreview",style:v},r),l.a.createElement("h3",null,"Processed"),l.a.createElement("div",{className:"imgPreview",style:E},s)),l.a.createElement("h2",null,"Detection result : ",""==this.state.detectResult&&""!=n?"CANNOT DETECT":this.state.detectResult))}}]),t}(l.a.Component),b=function(e){function t(e){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement(w,null)}}]),t}(l.a.Component);var y=function(){return l.a.createElement("div",{className:"App"},l.a.createElement("h1",null,"HKUST People Counting"),l.a.createElement(b,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[19,1,2]]]);
//# sourceMappingURL=main.a255d558.chunk.js.map